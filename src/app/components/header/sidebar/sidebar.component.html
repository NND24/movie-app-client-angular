<div
  class="bg-[#0a0c0f7a] w-[35%] sm:w-[50%] h-full fixed top-0 bottom-0 left-0 z-[1001]"
  (click)="onToggleSidebar()"
></div>
<div
  class="fixed top-0 bottom-0 right-0 w-[65%] sm:w-[50%] bg-[#0a0c0f] z-[1005]"
>
  <div class="h-full overflow-x-hidden overflow-auto small-scrollbar">
    <i
      class="fa fa-bars !text-[20px] text-white cursor-pointer mx-2 my-3"
      (click)="onToggleSidebar()"
    ></i>
    <a
      [routerLink]="['/']"
      class="block text-[17px] font-Poppins font-medium px-2 text-[#e0e0e0] h-[35px] cursor-pointer"
    >
      <span class="pl-1">Trang chủ</span>
    </a>

    <app-nav-items [isMobileTablet]="true" />

    <div class="w-full h-[36px] relative flex rounded-[4px] px-2 my-2">
      <input
        type="search"
        [(ngModel)]="search"
        class="w-full h-full pr-[40px] pl-[12px] rounded-[4px] bg-[#bebebe42] text-white size-[14px] overflow-hidden whitespace-nowrap text-ellipsis outline-none"
        autoComplete="off"
        placeholder="Tìm kiếm..."
        (keydown.enter)="handleSearch()"
      />
      <i
        class="fa fa-search text-[#d8d2d1] !text-[20px] absolute right-[10px] top-[8px] flex align-center justify-center cursor-pointer"
        (click)="handleSearch()"
      ></i>
    </div>

    <div
      *ngIf="user; else noUserData"
      class="absolute bottom-0 right-0 left-0 border-t-[1px] border-[#00DC5A] py-2 bg-[#0a0c0f] px-2"
    >
      <div
        class="flex items-center gap-2 cursor-pointer"
        (click)="onToggleModal()"
      >
        <img
          [src]="
            user.avatar.url ? user.avatar.url : '../../public/defaultAvatar.png'
          "
          alt="avatar"
          class="w-[30px] h-[30px] object-cover rounded-full"
        />
        <span class="text-[17px] font-Poppins font-medium text-[#e0e0e0]">{{
          user.name
        }}</span>
      </div>

      <ul
        *ngIf="openModal"
        class="absolute top-[-172px] left-[0px] sm:left-[10px] w-[220px] sm:w-[250px] py-1 bg-[#1a191f] flex flex-col"
        style="
          border-top-color: #00dc5a;
          border-top-width: 3px;
          box-shadow: inset 0 0 70px rgba(0, 0, 0, 0.3),
            0 0 20px rgba(0, 0, 0, 0.5);
        "
      >
        <a
          [routerLink]="['/lich-su']"
          class="text-[16px] font-Poppins font-medium text-[#e0e0e0] drop-shadow-[1px_1px_1px_#000] hover:text-[#00dc5a] hover:border-l-[3px] hover:border-[#00DC5A] p-2 flex items-center gap-2 hover:bg-[#96969633]"
        >
          <i class="fa fa-history text-[18px]"></i>
          <span>Lịch sử xem phim</span>
        </a>
        <a
          routerLink="/theo-doi"
          class="text-[16px] font-Poppins font-medium text-[#e0e0e0] drop-shadow-[1px_1px_1px_#000] hover:text-[#00dc5a] hover:border-l-[3px] hover:border-[#00DC5A] p-2 flex items-center gap-2 hover:bg-[#96969633]"
        >
          <i class="fa fa-bookmark"></i>
          <span>Phim đã lưu</span>
        </a>
        <a
          routerLink="/trang-ca-nhan"
          class="text-[16px] font-Poppins font-medium text-[#e0e0e0] drop-shadow-[1px_1px_1px_#000] hover:text-[#00dc5a] hover:border-l-[3px] hover:border-[#00DC5A] p-2 flex items-center gap-2 hover:bg-[#96969633]"
        >
          <i class="fa fa-user text-[30px]"></i>
          <span> Tài khoản của tôi</span>
        </a>
        <div
          class="text-[16px] font-Poppins font-medium text-[#e0e0e0] drop-shadow-[1px_1px_1px_#000] hover:text-[#00dc5a] hover:border-l-[3px] hover:border-[#00DC5A] p-2 flex items-center gap-2 hover:bg-[#96969633] cursor-pointer"
          (click)="handleLogout()"
        >
          <i class="fa fa-sign-out"></i>
          <span>Đăng xuất</span>
        </div>
      </ul>
    </div>

    <ng-template #noUserData>
      <div
        class="absolute bottom-0 right-0 left-0 border-t-[1px] border-[#00DC5A] py-2 bg-[#0a0c0f]"
      >
        <i
          class="fa fa-user mx-4 text-white hover:text-[#00dc5a] cursor-pointer !text-[30px]"
          (click)="onOpenLogin()"
        ></i>
      </div>
    </ng-template>
  </div>
</div>
